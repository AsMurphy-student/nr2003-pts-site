(()=>{const e=e=>{document.getElementById("errorMessage").textContent=e},t=async(t,r)=>{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await n.json();a.redirect&&(window.location=a.redirect),a.error&&e(a.error)};window.onload=()=>{const r=document.getElementById("signupForm"),n=document.getElementById("changePasswordForm"),a=document.getElementById("loginForm"),s=document.getElementById("championshipForm");r&&r.addEventListener("submit",n=>{n.preventDefault();const a=r.querySelector("#user").value,s=r.querySelector("#pass").value,o=r.querySelector("#pass2").value;return a&&s&&o?s!==o?(e("Passwords do not match!"),!1):(t(r.getAttribute("action"),{username:a,pass:s,pass2:o}),!1):(e("All fields are required!"),!1)}),n&&n.addEventListener("submit",r=>{r.preventDefault();const a=n.querySelector("#pass").value,s=n.querySelector("#pass2").value;return a!==s?(e("Passwords do not match!"),!1):(t(n.getAttribute("action"),{pass:a,pass2:s}),!1)}),a&&a.addEventListener("submit",r=>{r.preventDefault();const n=a.querySelector("#user").value,s=a.querySelector("#pass").value;return n&&s?(t(a.getAttribute("action"),{username:n,pass:s}),!1):(e("Username or password is empty!"),!1)}),s&&s.addEventListener("submit",r=>{r.preventDefault();const n=s.querySelector("#championshipName").value;return n?(t(s.getAttribute("action"),{name:n}),!1):(e("Championship name is required!"),!1)}),document.querySelectorAll(".championship form").forEach(e=>{const t=e.id.split("-")[0],r=e;e.addEventListener("submit",async e=>{e.preventDefault();const n=new FormData(r);n.append("name",t);const a=await fetch("/addRace",{method:"POST",body:n}),s=await a.json();return s.redirect&&(window.location=s.redirect),!1})})}})();