(()=>{const e=e=>{document.getElementById("errorMessage").textContent=e},t=async(t,r)=>{const n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),o=await n.json();o.redirect&&(window.location=o.redirect),o.error&&e(o.error)};window.onload=()=>{const r=document.getElementById("signupForm"),n=document.getElementById("changePasswordForm"),o=document.getElementById("loginForm"),a=document.getElementById("championshipForm");r&&r.addEventListener("submit",n=>{n.preventDefault();const o=r.querySelector("#user").value,a=r.querySelector("#pass").value,s=r.querySelector("#pass2").value;return o&&a&&s?a!==s?(e("Passwords do not match!"),!1):(t(r.getAttribute("action"),{username:o,pass:a,pass2:s}),!1):(e("All fields are required!"),!1)}),n&&n.addEventListener("submit",r=>{r.preventDefault();const o=n.querySelector("#pass").value,a=n.querySelector("#pass2").value;return o!==a?(e("Passwords do not match!"),!1):(t(n.getAttribute("action"),{pass:o,pass2:a}),!1)}),o&&o.addEventListener("submit",r=>{r.preventDefault();const n=o.querySelector("#user").value,a=o.querySelector("#pass").value;return n&&a?(t(o.getAttribute("action"),{username:n,pass:a}),!1):(e("Username or password is empty!"),!1)}),a&&a.addEventListener("submit",r=>{r.preventDefault();const n=a.querySelector("#championshipName").value;return n?(t(a.getAttribute("action"),{name:n}),!1):(e("Championship name is required!"),!1)}),document.querySelectorAll("#championship form").forEach(t=>{const r=t.id.split("-")[0],n=t;t.addEventListener("submit",async t=>{t.preventDefault();const o=new FormData(n);o.append("name",r);const a=await fetch("/addRace",{method:"POST",body:o}),s=await a.json();return s.redirect&&(window.location=s.redirect),s.error&&e(s.error),!1})}),document.getElementById("premium-button").addEventListener("click",async()=>{const t=await fetch("/togglePremium",{method:"POST"}),r=await t.json();return r.redirect&&(window.location=r.redirect),r.error&&e(r.error),!1})}})();