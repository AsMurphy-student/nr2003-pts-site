(()=>{const e=e=>{document.getElementById("errorMessage").textContent=e,document.getElementById("domoMessage").classList.remove("hidden")},t=async(t,n)=>{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await r.json();o.redirect&&(window.location=o.redirect),o.error&&e(o.error)};window.onload=()=>{const n=document.getElementById("signupForm"),r=document.getElementById("loginForm"),o=document.getElementById("championshipForm");n&&n.addEventListener("submit",r=>{r.preventDefault();const o=n.querySelector("#user").value,s=n.querySelector("#pass").value,a=n.querySelector("#pass2").value;return o&&s&&a?s!==a?(e("Passwords do not match!"),!1):(t(n.getAttribute("action"),{username:o,pass:s,pass2:a}),!1):(e("All fields are required!"),!1)}),r&&r.addEventListener("submit",n=>{n.preventDefault();const o=r.querySelector("#user").value,s=r.querySelector("#pass").value;return o&&s?(t(r.getAttribute("action"),{username:o,pass:s}),!1):(e("Username or password is empty!"),!1)}),o&&o.addEventListener("submit",e=>{e.preventDefault();const n=o.querySelector("#championshipName").value;return!!n&&(t(o.getAttribute("action"),{name:n}),!1)}),document.querySelectorAll(".championship form").forEach(e=>{const t=e.id.split("-")[0];let n=e;e.addEventListener("submit",async e=>{e.preventDefault();const r=new FormData(n);r.append("name",t);const o=await fetch("/addRace",{method:"POST",body:r}),s=await o.text();return document.getElementById("messages").innerText=s,!1})})}})();